"use client";
import { useAuth } from "@/app/UserProvider";
import { Divider, Menu, MenuItem, Popover } from "@mui/material";
import Image from "next/image";
import Link from "next/link";
import { useRouter } from "next/navigation";
import React from "react";

const ClientComponent: React.FC = () => {
  const { isAuthenticated, logout, userDetails } = useAuth();
  const router = useRouter();
  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);
  const open = Boolean(anchorEl);
  const id = open ? "simple-popover" : undefined;
  const handleClick = (event: React.MouseEvent<HTMLElement>) => {
    setAnchorEl(event.currentTarget);
  };
  const handleClose = () => {
    setAnchorEl(null);
  };
  const goToProfile = () => {
    router.push("/my/profile");
  };
  const handleLogout = () => {
    logout();
    handleClose();
  };
  return (
    <div className="col-lg-3 col-md-6 sign-in-top-box d-flex justify-content-end align-items-center">
      {!isAuthenticated && (
        <Link className="sign-in" href={"/login"}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="23"
            viewBox="0 0 24 23"
            fill="none"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M15.0851 9.10647C15.0851 9.92751 14.7386 10.7149 14.1218 11.2955C13.5049 11.876 12.6683 12.2022 11.7959 12.2022C10.9236 12.2022 10.0869 11.876 9.4701 11.2955C8.85326 10.7149 8.50671 9.92751 8.50671 9.10647C8.50671 8.28543 8.85326 7.49802 9.4701 6.91746C10.0869 6.3369 10.9236 6.01074 11.7959 6.01074C12.6683 6.01074 13.5049 6.3369 14.1218 6.91746C14.7386 7.49802 15.0851 8.28543 15.0851 9.10647ZM13.4405 9.10647C13.4405 9.51699 13.2673 9.9107 12.9588 10.201C12.6504 10.4913 12.2321 10.6543 11.7959 10.6543C11.3598 10.6543 10.9414 10.4913 10.633 10.201C10.3246 9.9107 10.1513 9.51699 10.1513 9.10647C10.1513 8.69595 10.3246 8.30225 10.633 8.01197C10.9414 7.72169 11.3598 7.55861 11.7959 7.55861C12.2321 7.55861 12.6504 7.72169 12.9588 8.01197C13.2673 8.30225 13.4405 8.69595 13.4405 9.10647Z"
              fill="white"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M11.7957 2.91577C6.80021 2.91577 2.75037 6.72739 2.75037 11.429C2.75037 16.1307 6.80021 19.9423 11.7957 19.9423C16.7912 19.9423 20.841 16.1307 20.841 11.429C20.841 6.72739 16.7912 2.91577 11.7957 2.91577ZM4.39497 11.429C4.39497 13.0466 4.98128 14.5356 5.96393 15.7182C6.65403 14.8652 7.54431 14.174 8.56523 13.6984C9.58615 13.2229 10.7101 12.976 11.8492 12.9769C12.9735 12.9759 14.0833 13.2164 15.0939 13.6802C16.1045 14.144 16.9893 14.8188 17.6809 15.6532C18.3934 14.7737 18.8731 13.7471 19.0804 12.6585C19.2877 11.5699 19.2165 10.4504 18.8729 9.3928C18.5292 8.33519 17.9229 7.36979 17.1041 6.5765C16.2853 5.78321 15.2775 5.18483 14.1643 4.83088C13.051 4.47692 11.8641 4.37755 10.7019 4.54101C9.53973 4.70447 8.4356 5.12604 7.48089 5.77085C6.52618 6.41566 5.74833 7.26517 5.21171 8.24909C4.67509 9.23302 4.39512 10.3231 4.39497 11.429ZM11.7957 18.3944C10.0968 18.3968 8.44915 17.8468 7.1316 16.8373C7.66193 16.1227 8.3678 15.5393 9.18916 15.1367C10.0105 14.7341 10.9231 14.5241 11.8492 14.5248C12.7637 14.5241 13.6652 14.7288 14.4788 15.1218C15.2924 15.5148 15.9947 16.0849 16.5272 16.7846C15.1995 17.8269 13.5247 18.3967 11.7957 18.3944Z"
              fill="white"
            />
          </svg>{" "}
          Sign In
        </Link>
      )}

      {!isAuthenticated && (
        <Link className="sign-up" href={"/signup"}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="23"
            viewBox="0 0 24 23"
            fill="none"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M15.0851 9.10647C15.0851 9.92751 14.7386 10.7149 14.1218 11.2955C13.5049 11.876 12.6683 12.2022 11.7959 12.2022C10.9236 12.2022 10.0869 11.876 9.4701 11.2955C8.85326 10.7149 8.50671 9.92751 8.50671 9.10647C8.50671 8.28543 8.85326 7.49802 9.4701 6.91746C10.0869 6.3369 10.9236 6.01074 11.7959 6.01074C12.6683 6.01074 13.5049 6.3369 14.1218 6.91746C14.7386 7.49802 15.0851 8.28543 15.0851 9.10647ZM13.4405 9.10647C13.4405 9.51699 13.2673 9.9107 12.9588 10.201C12.6504 10.4913 12.2321 10.6543 11.7959 10.6543C11.3598 10.6543 10.9414 10.4913 10.633 10.201C10.3246 9.9107 10.1513 9.51699 10.1513 9.10647C10.1513 8.69595 10.3246 8.30225 10.633 8.01197C10.9414 7.72169 11.3598 7.55861 11.7959 7.55861C12.2321 7.55861 12.6504 7.72169 12.9588 8.01197C13.2673 8.30225 13.4405 8.69595 13.4405 9.10647Z"
              fill="white"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M11.7957 2.91577C6.80021 2.91577 2.75037 6.72739 2.75037 11.429C2.75037 16.1307 6.80021 19.9423 11.7957 19.9423C16.7912 19.9423 20.841 16.1307 20.841 11.429C20.841 6.72739 16.7912 2.91577 11.7957 2.91577ZM4.39497 11.429C4.39497 13.0466 4.98128 14.5356 5.96393 15.7182C6.65403 14.8652 7.54431 14.174 8.56523 13.6984C9.58615 13.2229 10.7101 12.976 11.8492 12.9769C12.9735 12.9759 14.0833 13.2164 15.0939 13.6802C16.1045 14.144 16.9893 14.8188 17.6809 15.6532C18.3934 14.7737 18.8731 13.7471 19.0804 12.6585C19.2877 11.5699 19.2165 10.4504 18.8729 9.3928C18.5292 8.33519 17.9229 7.36979 17.1041 6.5765C16.2853 5.78321 15.2775 5.18483 14.1643 4.83088C13.051 4.47692 11.8641 4.37755 10.7019 4.54101C9.53973 4.70447 8.4356 5.12604 7.48089 5.77085C6.52618 6.41566 5.74833 7.26517 5.21171 8.24909C4.67509 9.23302 4.39512 10.3231 4.39497 11.429ZM11.7957 18.3944C10.0968 18.3968 8.44915 17.8468 7.1316 16.8373C7.66193 16.1227 8.3678 15.5393 9.18916 15.1367C10.0105 14.7341 10.9231 14.5241 11.8492 14.5248C12.7637 14.5241 13.6652 14.7288 14.4788 15.1218C15.2924 15.5148 15.9947 16.0849 16.5272 16.7846C15.1995 17.8269 13.5247 18.3967 11.7957 18.3944Z"
              fill="white"
            />
          </svg>{" "}
          Sign Up
        </Link>
      )}
      {isAuthenticated && (
        <div aria-describedby={id} onClick={handleClick} className="logout">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="23"
            viewBox="0 0 24 23"
            fill="none"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M15.0851 9.10647C15.0851 9.92751 14.7386 10.7149 14.1218 11.2955C13.5049 11.876 12.6683 12.2022 11.7959 12.2022C10.9236 12.2022 10.0869 11.876 9.4701 11.2955C8.85326 10.7149 8.50671 9.92751 8.50671 9.10647C8.50671 8.28543 8.85326 7.49802 9.4701 6.91746C10.0869 6.3369 10.9236 6.01074 11.7959 6.01074C12.6683 6.01074 13.5049 6.3369 14.1218 6.91746C14.7386 7.49802 15.0851 8.28543 15.0851 9.10647ZM13.4405 9.10647C13.4405 9.51699 13.2673 9.9107 12.9588 10.201C12.6504 10.4913 12.2321 10.6543 11.7959 10.6543C11.3598 10.6543 10.9414 10.4913 10.633 10.201C10.3246 9.9107 10.1513 9.51699 10.1513 9.10647C10.1513 8.69595 10.3246 8.30225 10.633 8.01197C10.9414 7.72169 11.3598 7.55861 11.7959 7.55861C12.2321 7.55861 12.6504 7.72169 12.9588 8.01197C13.2673 8.30225 13.4405 8.69595 13.4405 9.10647Z"
              fill="white"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M11.7957 2.91577C6.80021 2.91577 2.75037 6.72739 2.75037 11.429C2.75037 16.1307 6.80021 19.9423 11.7957 19.9423C16.7912 19.9423 20.841 16.1307 20.841 11.429C20.841 6.72739 16.7912 2.91577 11.7957 2.91577ZM4.39497 11.429C4.39497 13.0466 4.98128 14.5356 5.96393 15.7182C6.65403 14.8652 7.54431 14.174 8.56523 13.6984C9.58615 13.2229 10.7101 12.976 11.8492 12.9769C12.9735 12.9759 14.0833 13.2164 15.0939 13.6802C16.1045 14.144 16.9893 14.8188 17.6809 15.6532C18.3934 14.7737 18.8731 13.7471 19.0804 12.6585C19.2877 11.5699 19.2165 10.4504 18.8729 9.3928C18.5292 8.33519 17.9229 7.36979 17.1041 6.5765C16.2853 5.78321 15.2775 5.18483 14.1643 4.83088C13.051 4.47692 11.8641 4.37755 10.7019 4.54101C9.53973 4.70447 8.4356 5.12604 7.48089 5.77085C6.52618 6.41566 5.74833 7.26517 5.21171 8.24909C4.67509 9.23302 4.39512 10.3231 4.39497 11.429ZM11.7957 18.3944C10.0968 18.3968 8.44915 17.8468 7.1316 16.8373C7.66193 16.1227 8.3678 15.5393 9.18916 15.1367C10.0105 14.7341 10.9231 14.5241 11.8492 14.5248C12.7637 14.5241 13.6652 14.7288 14.4788 15.1218C15.2924 15.5148 15.9947 16.0849 16.5272 16.7846C15.1995 17.8269 13.5247 18.3967 11.7957 18.3944Z"
              fill="white"
            />
          </svg>{" "}
          {userDetails?.name}
        </div>
      )}
      <Popover
        id={id}
        open={open}
        anchorEl={anchorEl}
        onClose={handleClose}
        anchorOrigin={{
          vertical: "bottom",
          horizontal: "left",
        }}
        sx={{ mt: 1 }}
      >
        <div
          style={{
            paddingTop: "8px",
            paddingLeft: "16px",
            paddingRight: "16px",
            paddingBottom: "8px",
            minHeight: "90px",
          }}
        >
          <div onClick={goToProfile} className="logoutWidth">
            <Image
              width={22}
              height={22}
              src="/images/user-dashboard/icons/dashboard.svg"
              alt=""
            />
            <span className="logoutText">My dashboard</span>
          </div>
          <Divider component="div" sx={{ backgroundColor: "#CAD5D3" }} />
          <div onClick={handleLogout} className="logoutWidth">
            <Image
              width={22}
              height={22}
              src="/images/user-dashboard/icons/logout.svg"
              alt=""
            />{" "}
            <span className="logoutText">Logout</span>
          </div>
        </div>
      </Popover>
      <a className="notification notifications" href="#">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="27"
          height="27"
          viewBox="0 0 27 27"
          fill="none"
        >
          <path
            d="M21.9312 13.9146V11.7744H20.276V14.2573C20.276 14.4768 20.3633 14.6872 20.5185 14.8424L22.7588 17.0828V18.3954H4.55123V17.0828L6.7916 14.8424C6.94682 14.6872 7.03404 14.4768 7.03409 14.2573V10.9468C7.03178 9.78383 7.33642 8.64084 7.91723 7.63328C8.49804 6.62572 9.33446 5.78928 10.342 5.20843C11.3495 4.62759 12.4925 4.32291 13.6555 4.32518C14.8185 4.32744 15.9602 4.63657 16.9655 5.22134V3.37161C16.1777 3.02279 15.3398 2.80046 14.4827 2.71283V1.01538H12.8274V2.712C10.787 2.91967 8.89603 3.87655 7.52021 5.3976C6.14438 6.91866 5.38142 8.89583 5.37885 10.9468V13.9146L3.13849 16.155C2.98327 16.3102 2.89604 16.5206 2.896 16.7401V19.223C2.896 19.4425 2.98319 19.653 3.1384 19.8082C3.29361 19.9634 3.50412 20.0506 3.72361 20.0506H9.51694V20.8782C9.51694 21.9757 9.95292 23.0283 10.729 23.8043C11.505 24.5803 12.5575 25.0163 13.655 25.0163C14.7525 25.0163 15.8051 24.5803 16.5811 23.8043C17.3572 23.0283 17.7931 21.9757 17.7931 20.8782V20.0506H23.5865C23.806 20.0506 24.0165 19.9634 24.1717 19.8082C24.3269 19.653 24.4141 19.4425 24.4141 19.223V16.7401C24.414 16.5206 24.3268 16.3102 24.1716 16.155L21.9312 13.9146ZM16.1379 20.8782C16.1379 21.5367 15.8763 22.1682 15.4107 22.6339C14.9451 23.0995 14.3135 23.3611 13.655 23.3611C12.9965 23.3611 12.365 23.0995 11.8994 22.6339C11.4338 22.1682 11.1722 21.5367 11.1722 20.8782V20.0506H16.1379V20.8782Z"
            fill="white"
          />
          <path
            d="M21.9311 10.1192C23.7594 10.1192 25.2416 8.63709 25.2416 6.80876C25.2416 4.98044 23.7594 3.49829 21.9311 3.49829C20.1028 3.49829 18.6206 4.98044 18.6206 6.80876C18.6206 8.63709 20.1028 10.1192 21.9311 10.1192Z"
            fill="white"
          />
        </svg>
        <div className="notifi-box">
          <h1>Notifications</h1>
          <ul>
            <li>
              Lorem Ipsum is simply dummy text of the pritin and typesetting
              industry.{" "}
            </li>
            <li>
              Lorem Ipsum is simply dummy text of the pritin and typesetting
              industry.{" "}
            </li>
            <li>
              Lorem Ipsum is simply dummy text of the pritin and typesetting
              industry.{" "}
            </li>
            <li>
              Lorem Ipsum is simply dummy text of the pritin and typesetting
              industry.{" "}
            </li>
          </ul>
        </div>
      </a>
    </div>
  );
};

export default ClientComponent;
